<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ slide.content.title }} - ë¯¸ë¦¬ë³´ê¸°</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/student/student.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Preview ëª¨ë“œ í”Œë˜ê·¸ -->
    <script>window.IS_PREVIEW_MODE = true;</script>
    
    {% block extra_css %}
    <!-- ìœ„ì—ì„œ ì œê³µí•œ OX í€´ì¦ˆ CSS ì „ì²´ ë‚´ìš©ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ê¸° -->
    <link rel="stylesheet" href="/static/css/student/slides/ox.css">
    <link rel="stylesheet" href="/static/css/student/slides/selection.css">
    <link rel="stylesheet" href="/static/css/student/slides/choice.css">
    <link rel="stylesheet" href="/static/css/student/slides/drag.css">
    <link rel="stylesheet" href="/static/css/student/slides/line.css">
    <style>
        /* Multi-choice ì •ë‹µ/ì˜¤ë‹µ ìƒíƒœ ìŠ¤íƒ€ì¼ */
        .answer.multi-choice.border-green-500 {
            transition: all 0.3s ease;
        }
        .answer.multi-choice.border-red-500 {
            transition: all 0.3s ease;
        }
        .answer.multi-choice.cursor-not-allowed {
            pointer-events: none;
        }

        /* Selection í€´ì¦ˆ ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        .selection-quiz-container .quiz-container,
        .selection-quiz-container .options-container {
            display: none !important;
        }

        /* Multi-choice ì •ë‹µ/ì˜¤ë‹µ ìƒíƒœ ìŠ¤íƒ€ì¼ */
        .answer.multi-choice.border-green-500 {
            transition: all 0.3s ease;
        }
        .answer.multi-choice.border-red-500 {
            transition: all 0.3s ease;
        }
        .answer.multi-choice.cursor-not-allowed {
            pointer-events: none;
        }
    
        /* Selection í€´ì¦ˆ ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        .selection-quiz-container .quiz-container,
        .selection-quiz-container .options-container {
            display: none !important;
        }
        
        /* â˜…â˜…â˜… ë“œë˜ê·¸ í€´ì¦ˆ ìˆ˜ì • ìŠ¤íƒ€ì¼ â˜…â˜…â˜… */
        .drag-quiz-container .quiz-container .options-container,
        .drag-quiz-container .quiz-container .option-button,
        .drag-quiz-container .quiz-container .choice.answer {
            display: none !important;
        }
    
        /* ë“œë˜ê·¸ í€´ì¦ˆì˜ question-boxëŠ” ë³´ì´ë„ë¡ ìœ ì§€ */
        .drag-quiz-container .question-box,
        .drag-quiz-container #question-text {
            display: flex !important;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        /* ë“œë˜ê·¸ í€´ì¦ˆ ë‚´ë¶€ì˜ ë¬¸ì œ í…ìŠ¤íŠ¸ë§Œ ë³´ì´ê²Œ */
        .drag-quiz-container .question-box .quiz-container .question-text,
        .drag-quiz-container .question-box .quiz-container h1 {
            display: block !important;
        }

        /* Preview ëª¨ë“œ íŠ¹ë³„ ìŠ¤íƒ€ì¼ */
        body {
            padding: 20px;
            background: #f8fafc;
        }

        .preview-header {
            background: #3b82f6;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .content-card {
            margin: 0 auto;
        }
    </style>
    
    {% endblock %}

   
</head>
<body class="bg-slate-50">
    <!-- Preview ëª¨ë“œ í—¤ë” -->
    <div class="preview-header">
        <i class="fas fa-eye mr-2"></i>
        ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œ - {{ slide.content.title }}
    </div>

    <div class="main-content min-h-screen">
        <main class="max-w-4xl mx-auto px-6 py-2">
            <div class="content-card bg-white rounded-2xl shadow-lg overflow-hidden mb-8 max-w-4xl flex flex-col justify-start items-center">
                
                <!-- ìŠ¬ë¼ì´ë“œ íƒ€ì´í‹€ ë¶€ë¶„ -->
                <div class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-4">
                    <h1 class="text-xl font-bold">{{ slide.content.title }}</h1>
                    <p class="text-blue-100 text-sm mt-1">{{ slide.content.content_type.type_name }}</p>
                </div>
                
                <div class="px-4 sm:px-6 lg:px-8 py-2 sm:py-2 w-full">
                    <div class="prose prose-sm sm:prose-base lg:prose-lg max-w-none mx-auto relative">

                        <!-- ë¬¸í•­ ìœ í˜•ë³„ ì»¨í…ì¸  ë Œë”ë§ -->
                        {% if slide.content_type.type_name == 'take-action' %}
                            {% include 'student/slides/take_action.html' %}
                        {% elif slide.content_type.type_name == 'rolling' %}
                            {% include 'student/slides/rolling.html' %}
                        {% elif slide.content_type.type_name == 'multiple-choice' %}
                            {% include 'student/slides/multiple_choice.html' %}
                        {% elif slide.content_type.type_name == 'multi-choice' %}
                            {% include 'student/slides/multi_choice.html' %}
                        {% elif slide.content_type.type_name == 'short-answer' %}
                            {% include 'student/slides/short_answer.html' %}
                        {% elif slide.content_type.type_name == 'multi-input' %}
                            {% include 'student/slides/multi_input.html' %}
                        {% elif slide.content_type.type_name == 'one_shot_submit' %}
                            {% include 'student/slides/one_shot_submit.html' %}
                        {% elif slide.content_type.type_name == 'physical_record' %}
                            {% include 'student/slides/physical_record.html' %}
                        {% elif slide.content_type.type_name == 'ordering' %}
                            {% include 'student/slides/ordering.html' %}
                        {% elif slide.content_type.type_name == 'ox-quiz' %}
                            {% include 'student/slides/ox_quiz.html' %}
                        {% elif slide.content_type.type_name == 'selection' %}
                            {% include 'student/slides/selection_quiz.html' %}
                        {% elif slide.content_type.type_name == 'choice' %}
                            {% include 'student/slides/choice_quiz.html' %}
                        {% elif slide.content_type.type_name == 'drag' %}
                            {% include 'student/slides/drag_quiz.html' %}
                        {% elif slide.content_type.type_name == 'line_matching' %}
                            {% include 'student/slides/line_quiz.html' %}
                        
                        {% else %}
                            {% include 'student/slides/default_content.html' %}
                        {% endif %}

                        <!-- ê²°ê³¼ GIF í‘œì‹œ ì˜ì—­ (ë¯¸ë¦¬ë³´ê¸°ì—ì„œëŠ” ìˆ¨ê¹€) -->
                        <div id="right-gif" class="hidden"></div>
                        <div id="wrong-gif" class="hidden"></div>
                    </div>
                    
                    <!-- ì œì¶œ ë²„íŠ¼ ì˜ì—­ (ë¯¸ë¦¬ë³´ê¸°ì—ì„œëŠ” ë¹„í™œì„±í™”) -->
                    <div class="flex flex-col sm:flex-row gap-3 mt-6 pt-6 border-t border-gray-200">
                        <button id="submit-btn" disabled class="flex-1 bg-gray-400 text-white py-3 px-6 rounded-lg cursor-not-allowed">
                            <i class="fas fa-paper-plane mr-2"></i>ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œ (ì œì¶œ ë¶ˆê°€)
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- í† ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ -->
    <div id="toastContainer"></div>

    <!-- ê³µí†µ JavaScript -->
    {% include 'student/slides/scripts/common.html' %}
    
    <!-- ë¬¸í•­ ìœ í˜•ë³„ JavaScript -->
    {% if slide.content_type.type_name in 'multiple-choice,multi-choice,short-answer,ox-quiz,selection,drag,line_matching' %}
        {% include 'student/slides/scripts/choice_questions.html' %}
       <!-- ê° íƒ€ì…ë³„ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
        {% if slide.content_type.type_name == 'ox-quiz' %}
        {% include 'student/slides/scripts/ox_quiz.html' %}
        {% elif slide.content_type.type_name == 'selection' %}
            {% include 'student/slides/scripts/selection_quiz.html' %}
        {% elif slide.content_type.type_name == 'choice' %}
            {% include 'student/slides/scripts/choice_quiz.html' %}
        {% elif slide.content_type.type_name == 'drag' %}
            {% include 'student/slides/scripts/drag_quiz.html' %}
         {% elif slide.content_type.type_name == 'line_matching' %}
            {% include 'student/slides/scripts/line_quiz.html' %}
        {% endif %}
    {% elif slide.content_type.type_name == 'multi-input' %}
        {% include 'student/slides/scripts/multi_input.html' %}
    {% elif slide.content_type.type_name == 'one_shot_submit' %}
        {% include 'student/slides/scripts/one_shot_submit.html' %}
    {% elif slide.content_type.type_name == 'physical_record' %}
        {% include 'student/slides/scripts/physical_record.html' %}
    {% elif slide.content_type.type_name == 'ordering' %}
        {% include 'student/slides/scripts/ordering.html' %}
    {% endif %}

    <!-- ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
    $(document).ready(function() {
        // ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œì—ì„œ ì™¸ë¶€ ë§í¬ í´ë¦­ ì°¨ë‹¨
        $('a[href^="/rolling/"], a[href^="/health_habit/"]').on('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const linkType = $(this).attr('href').includes('/rolling/') ? 'ì‹¤ì²œ ê¸°ë¡' : 'ê±´ê°• ìŠµê´€ ê¸°ë¡';
            showToast(`ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œì—ì„œëŠ” ${linkType} í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`, 'info');
            
            return false;
        });
        
        // ë§í¬ ìŠ¤íƒ€ì¼ ë³€ê²½ (ë¹„í™œì„±í™”ëœ ê²ƒì²˜ëŸ¼ ë³´ì´ê²Œ)
        $('a[href^="/rolling/"], a[href^="/health_habit/"]')
            .css({
                'cursor': 'not-allowed',
                'opacity': '0.7',
                'position': 'relative'
            })
            .attr('title', 'ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œì—ì„œëŠ” í´ë¦­í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤')
            .after('<div class="text-xs text-gray-500 mt-2 text-center">ğŸ“ ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œì—ì„œëŠ” ì‹¤ì œ ê¸°ë¡ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</div>');
    });
    </script>
   
</body>
</html>